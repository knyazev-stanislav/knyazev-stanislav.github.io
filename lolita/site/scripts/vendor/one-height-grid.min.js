define("one-height-grid", ["backbone"], function(e) {
    var t = e.View.extend({
        options: {
            rowSelector: ".one-height-grid-row",
            cellSelector: ".one-height-grid-cell",
            cellMargin: 0,
            parentWidth: 0,
            regenerateFlag: !1
        },
        initialize: function() {
            var e = this;
            this.options.cellMargin = $(this.el).data("margin"), $(this.el).data("resize") != "off" && $(window).on("resize", function() {
                e.setGridSize()
            })
        },
        setGridSize: function() {
            var e = this;
            this.options.parentWidth = $(this.el).width(), $(e.options.rowSelector).each(function() {
                if ($(e.el).width() != e.options.parentWidth && e.options.regenerateFlag === !1) return e.options.regenerateFlag = !0, e.setGridSize(), !0;
                var t = $(this).find(e.options.cellSelector),
                    n = new Array,
                    r = new Array,
                    i = new Array,
                    s = 1e5;
                $(t).each(function() {
                    var e = parseInt($(this).data("width")),
                        t = parseInt($(this).data("height"));
                    t < s && (s = t), n.push(e), r.push(t), i.push(e / t)
                });
                var o = 0;
                for (var u = 0; u < n.length; u++) n[u] = s * i[u], o += n[u];
                i = (e.options.parentWidth - (n.length - 1) * e.options.cellMargin) / o, s = Math.round(s * i), o = 0;
                for (var u = 0; u < n.length; u++) n[u] = Math.round(n[u] * i), o += n[u], $(t).eq(u).css({
                    height: s + "px",
                    width: n[u] + "px",
                    marginBottom: e.options.cellMargin + "px"
                }), u != n.length - 1 ? ($(t).eq(u).css({
                    marginRight: e.options.cellMargin + "px"
                }), o += e.options.cellMargin) : e.options.parentWidth < o && (n[u] = n[u] - (o - e.options.parentWidth), $(t).eq(u).css({
                    width: n[u] + "px"
                })), $(t).eq(u).trigger("render:finish")
            }), e.options.regenerateFlag = !1
        },
        render: function() {
            return this.setGridSize(), this
        }
    });
    return t
});